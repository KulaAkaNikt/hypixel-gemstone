document.addEventListener('DOMContentLoaded', () => {
    const tbody = document.getElementById('gemBody');
    const status = document.getElementById('status');
    const refreshBtn = document.querySelector('.refresh-btn');

    // PrzykÅ‚adowe dane
    let data = {
        success: true,
        products: {
            "FINE_RUBY_GEM": { sell_summary:[{pricePerUnit:1000}], quick_status:{sellPrice:1000}, buy_summary:[{pricePerUnit:1100}], quick_status:{buyPrice:1100} },
            "FLAWLESS_RUBY_GEM": { buy_summary:[{pricePerUnit:1200}], quick_status:{buyPrice:1200}, sell_summary:[{pricePerUnit:1150}], quick_status:{sellPrice:1150} },
            "FINE_AMETHYST_GEM": { sell_summary:[{pricePerUnit:800}], quick_status:{sellPrice:800}, buy_summary:[{pricePerUnit:900}], quick_status:{buyPrice:900} },
            "FLAWLESS_AMETHYST_GEM": { buy_summary:[{pricePerUnit:950}], quick_status:{buyPrice:950}, sell_summary:[{pricePerUnit:920}], quick_status:{sellPrice:920} },
            "FERMENTO": { sell_summary:[{pricePerUnit:50}], quick_status:{sellPrice:50}, buy_summary:[{pricePerUnit:60}], quick_status:{buyPrice:60} },
            "CONDENSED_FERMENTO": { buy_summary:[{pricePerUnit:500}], quick_status:{buyPrice:500}, sell_summary:[{pricePerUnit:480}], quick_status:{sellPrice:480} },
            "HELIANTHUS": { sell_summary:[{pricePerUnit:30}], quick_status:{sellPrice:30}, buy_summary:[{pricePerUnit:40}], quick_status:{buyPrice:40} },
            "CONDENSED_HELIANTHUS": { buy_summary:[{pricePerUnit:300}], quick_status:{buyPrice:300}, sell_summary:[{pricePerUnit:280}], quick_status:{sellPrice:280} }
        }
    };

    const taxRate = 0.011;
    const format = num => num.toLocaleString('pl-PL', { minimumFractionDigits:1, maximumFractionDigits:1 });

    const getPriceFromSummary = (product, type) => {
        if(type === 'sell') return product.sell_summary[0]?.pricePerUnit ??_
